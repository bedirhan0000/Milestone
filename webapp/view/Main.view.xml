<mvc:View controllerName="milestone.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    displayBlock="true"
    height="100%">

    <Page id="page" title="{i18n>appTitle}" showHeader="true" enableScrolling="true">
        <content>

            <smartFilterBar:SmartFilterBar 
                id="smartFilterBar"
                entitySet="GetMainDataSet"
                persistencyKey="FilterBar_FinalFix_V2"
                enableBasicSearch="false"
                liveMode="false"
                showFilterConfiguration="true"
                useToolbar="false"
                beforeVariantFetch="onBeforeVariantFetch" 
                afterVariantLoad="onAfterVariantLoad">

                <smartFilterBar:controlConfiguration>

                    <smartFilterBar:ControlConfiguration 
                        id="_IDGenControlConfiguration" 
                        key="Vbeln"
                        visibleInAdvancedArea="true"
                        visible="true"
                        index="0"
                        label="{i18n>colVbeln}" />

                </smartFilterBar:controlConfiguration>
            </smartFilterBar:SmartFilterBar>

            <smartTable:SmartTable id="smartTable"
                beforeRebindTable="onBeforeRebindTable"
                entitySet="GetMainDataSet"
                smartFilterId="smartFilterBar"
                tableType="ResponsiveTable"
                useExportToExcel="true"
                useVariantManagement="true"
                useTablePersonalisation="true"
                header="{i18n>tableHeader}"
                showRowCount="true"
                enableAutoBinding="true"
                fitContainer="false"
                requestAtLeastFields="Vbeln,Waerk,Zzposid,Project_name,Fplnr"
                class="sapUiResponsiveContentPadding"
                ignoredFields=""
                showFullScreenButton="true">


                <Table id="innerTable"
                    growing="true"
                    growingThreshold="500"
                    growingScrollToLoad="true"
                    fixedLayout="true"
                    sticky="ColumnHeaders">

                    <columns>
                        <Column id="_IDGenColumn5" width="8rem">
                            <customData>
                                <core:CustomData key="p13nData"
                                    value='\{"columnKey": "Vbeln", "leadingProperty": "Vbeln", "sortProperty": "Vbeln", "filterProperty": "Vbeln", "columnIndex": 0}' />
                            </customData>
                            <Text id="_IDGenText8" text="{i18n>colVbeln}" />
                        </Column>

                        <Column id="_IDGenColumn6" width="15rem">
                            <customData>
                                <core:CustomData key="p13nData"
                                    value='\{"columnKey": "Post1", "leadingProperty": "Post1", "sortProperty": "Post1", "filterProperty": "Post1", "columnIndex": 1}' />
                            </customData>
                            <Text id="_IDGenText10" text="{i18n>colPost1}" />
                        </Column>

                        <Column id="_IDGenColumn7" width="10rem" hAlign="End">
                            <customData>
                                <core:CustomData key="p13nData"
                                    value='\{"columnKey": "TopFaturalanan", "leadingProperty": "TopFaturalanan", "sortProperty": "TopFaturalanan", "filterProperty": "TopFaturalanan", "columnIndex": 2}' />
                            </customData>
                            <Text id="_IDGenText11" text="{i18n>colTopFaturalanan}" />
                        </Column>

                        <Column id="_IDGenColumn8" width="10rem" hAlign="End">
                            <customData>
                                <core:CustomData key="p13nData"
                                    value='\{"columnKey": "TopAcikBakiye", "leadingProperty": "TopAcikBakiye", "sortProperty": "TopAcikBakiye", "filterProperty": "TopAcikBakiye", "columnIndex": 3}' />
                            </customData>
                            <Text id="_IDGenText12" text="{i18n>colTopAcikBakiye}" />
                        </Column>

                        <Column id="_IDGenColumnZzposid" width="9rem">
                            <customData>
                                <core:CustomData key="p13nData"
                                    value='\{"columnKey": "Zzposid", "leadingProperty": "Zzposid", "sortProperty": "Zzposid", "filterProperty": "Zzposid", "columnIndex": 4}' />
                            </customData>
                            <Text id="_IDGenTextZzposid" text="{i18n>posidLabel}" />
                        </Column>

                        <Column id="_IDGenColumnProjectName" width="12rem">
                            <customData>
                                <core:CustomData key="p13nData"
                                    value='\{"columnKey": "Project_Name", "leadingProperty": "Project_Name", "sortProperty": "Project_Name", "filterProperty": "Project_Name", "columnIndex": 5}' />
                            </customData>
                            <Text id="_IDGenTextProjectName" text="{i18n>projectNameLabel}" />
                        </Column>

                        <Column id="_IDGenColumnFplnr" width="8rem">
                            <customData>
                                <core:CustomData key="p13nData"
                                    value='\{"columnKey": "Fplnr", "leadingProperty": "Fplnr", "sortProperty": "Fplnr", "filterProperty": "Fplnr", "columnIndex": 6}' />
                            </customData>
                            <Text id="_IDGenTextFplnr" text="{i18n>fplnrLabel}" />
                        </Column>
                    </columns>

                    <items>
                        <ColumnListItem id="_IDGenColumnListItem" type="Navigation" press=".onOpenDetailDialog">
                            <cells>
                                <Text id="_IDGenText15" text="{Vbeln}" />
                                <Text id="_IDGenText16" text="{Post1}" />
                                <ObjectNumber id="_IDGenObjectNumber"
                                    number="{parts:[{path:'TopFaturalanan'},{path:'Waerk'}], type:'sap.ui.model.type.Currency', formatOptions:{showMeasure: false}}"
                                    unit="{Waerk}"
                                    state="Success" />
                                <ObjectNumber id="_IDGenObjectNumber1"
                                    number="{parts:[{path:'TopAcikBakiye'},{path:'Waerk'}], type:'sap.ui.model.type.Currency', formatOptions:{showMeasure: false}}"
                                    unit="{Waerk}"
                                    state="Warning" />
                                <Text id="_IDGenTextZzposidCell" text="{Zzposid}" />
                                <Text id="_IDGenTextProjectNameCell" text="{Project_name}" />
                                <Text id="_IDGenTextFplnrCell" text="{Fplnr}" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </smartTable:SmartTable>
        </content>
    </Page>
</mvc:View>
